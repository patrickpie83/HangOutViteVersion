import{_ as y,s as N,m as k,g as b,o as a,c,b as o,t as f,F as w,j as R,a as l,w as I,n as S,r,p as M,e as T,f as x,k as K,i as B,v as H,q as A}from"./index-Dky6gahk.js";import{H as D}from"./HeaderComponent-KJHQSR9x.js";import{C as L,N as P,s as V}from"./NotLogin-COlQHwdW.js";import{c as C}from"./chatRoomStore-DCx-8lwT.js";import"./axios-Bo0ATomq.js";import"./timeStore-Cf0i_xnp.js";const j={setup(){const s=C(),{loadingRoom:n,userId:i,targetId:t,allRoom:_,renderNavData:d,targetName:m,targetPic:e}=N(s),{getTargetRoomKey:h,getOwnKeys:u,getConnect:p,switchTargetIdAndRoomKey:v}=s;return k(_,()=>{h(),u()}),b(()=>{p()}),{loadingRoom:n,userId:i,targetId:t,renderNavData:d,switchTargetIdAndRoomKey:v,targetName:m,targetPic:e}}},q=s=>(M("data-v-f878cdd3"),s=s(),T(),s),F={class:"bg-hangout-block overflow-auto"},z={class:"hintArea py-sm-4 px-3 border-bottom border-hangout-second bg-hangout-decorate"},E={key:0,class:"fw-bold d-flex flex-column align-items-center"},O=q(()=>o("p",{class:"text-hangout-second mb-sm-3"},"目前所選聊天對象為",-1)),U={class:"div mx-auto d-sm-flex align-items-center"},G=["src","alt"],J={class:"ms-sm-2 text-hangout-second"},Q={key:1,class:"fw-bold"},W={class:"container"},X={key:0,class:"text-center"},Y={key:1,class:"list-unstyled"},Z={class:"col-lg-6 d-flex"},$={class:"w-50"},tt={class:"ratio ratio-1x1"},ot=["src"],et={class:"w-50"},st={class:"ratio ratio-1x1"},nt=["src"],at={class:"col-lg-6 nameText d-flex justify-content-start align-items-center"},ct={class:"col-lg-12"},rt={class:"mt-1 text-end timeText text-hangout-text"};function dt(s,n,i,t,_,d){const m=r("router-link");return a(),c("nav",F,[o("div",z,[t.targetId?(a(),c("div",E,[O,o("div",U,[o("img",{class:"targetHint",src:t.targetPic,alt:t.targetName},null,8,G),o("p",J,f(t.targetName),1)])])):(a(),c("p",Q,"目前未選擇聊天對象"))]),o("div",W,[t.loadingRoom?(a(),c("p",X," loading ...")):(a(),c("ul",Y,[(a(!0),c(w,null,R(t.renderNavData,e=>(a(),c("li",{key:e.roomKey},[l(m,{onClick:h=>t.switchTargetIdAndRoomKey(e.otherId,e.roomKey),to:{path:"/chatroom/"+e.otherId,query:{targetId:e.otherId}},class:S([{"bg-hangout-second":e.otherId==t.targetId},"chatTarget row py-2 border-bottom border-hangout-second text-decoration-none"])},{default:I(()=>[o("div",Z,[o("div",$,[o("div",tt,[o("img",{src:e.otherPic,alt:""},null,8,ot)])]),o("div",et,[o("div",st,[o("img",{src:e.petPic,alt:""},null,8,nt)])])]),o("div",at,[o("p",null,f(e.otherName),1)]),o("div",ct,[o("p",rt,"最近交談時間 "+f(e.lastestTime),1)])]),_:2},1032,["onClick","to","class"])]))),128))]))])])}const lt=y(j,[["render",dt],["__scopeId","data-v-f878cdd3"]]),it={components:{HeaderComponent:D,ChatRoomNav:L,ChatNav:lt,NotLogin:P},setup(){const s=V(),n=C(),{sendMsg:i}=n,t=x(""),_=()=>{t.value.trim()&&(i(t.value),t.value="")},d=x("");return b(()=>{s.navState="chatroom",d.value=localStorage.getItem("userId")}),{status:s,userId:d,newMsg:t,callSendMsg:_}}},_t={key:0,class:"bg-hangout-second border border-hangout-second"},mt={class:"myContainer"},gt={class:"d-flex position-relative"},ht={class:"inputArea bg-hangout-primary position-absolute d-flex justify-content-center align-items-center"};function ut(s,n,i,t,_,d){const m=r("HeaderComponent"),e=r("ChatNav"),h=r("router-view"),u=r("content"),p=r("NotLogin"),v=r("ChatRoomNav");return a(),c(w,null,[l(m),t.userId?(a(),c("div",_t,[o("div",mt,[o("div",gt,[l(e,{class:"w-25 chatRoomTargets"}),l(u,{class:"w-75 bg-hangout-bg"},{default:I(()=>[l(h),o("div",ht,[B(o("input",{"onUpdate:modelValue":n[0]||(n[0]=g=>t.newMsg=g),onKeyup:n[1]||(n[1]=A((...g)=>t.callSendMsg&&t.callSendMsg(...g),["enter"])),type:"text",class:"inputText px-4",placeholder:"輸入訊息"},null,544),[[H,t.newMsg]]),o("button",{onClick:n[2]||(n[2]=(...g)=>t.callSendMsg&&t.callSendMsg(...g)),type:"button",class:"sendBtn ms-2"},"送出")])]),_:1})])])])):(a(),K(p,{key:1})),l(v)],64)}const wt=y(it,[["render",ut],["__scopeId","data-v-f46160bd"]]);export{wt as default};
