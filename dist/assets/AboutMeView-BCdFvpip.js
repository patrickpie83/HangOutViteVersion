import{a as h}from"./axios-Bo0ATomq.js";import{t as N,H as V,S as v}from"./HeaderComponent-eauQwiil.js";import{s as O,C as D,N as U}from"./NotLogin-DwVwAIB4.js";import{t as H}from"./timeStore-CVQe7BCv.js";import{_ as j,f as I,g as W,c as l,a as M,b as e,t as b,i as w,v as y,F as C,j as E,k as R,o as a,p as z,e as A,r as T}from"./index-Bw_72BcY.js";const _="https://hangoutserver.onrender.com",F=O(),p=N(),S=H(),G={components:{HeaderComponent:V,ChatRoomNav:D,NotLogin:U},setup(){const s=I({email:"",userInfo:{},petInfo:{},lifePic:[]}),o=async n=>{if(n=="會員名稱"){const{value:c}=await v.fire({title:"編輯會員名稱",input:"text",inputLabel:"",inputValue:s.value.userInfo.name,showCancelButton:!0,inputValidator:d=>{if(!d)return"不得為空白"}});c&&(s.value.userInfo.name=c,h.patch(`${_}/users/${u.value}`,s.value).then(()=>{p.pushMessage("success","修改成功")}).catch(d=>{console.log(d)}))}else if(n=="性別"){const{value:c}=await v.fire({title:"編輯會員性別",input:"select",inputOptions:{男性:"男性",女性:"女性",多元:"多元",不公開:"不公開"},inputPlaceholder:"請選擇",showCancelButton:!0});c&&(s.value.userInfo.gender=c,h.patch(`${_}/users/${u.value}`,s.value).then(()=>{p.pushMessage("success","修改成功")}).catch(d=>{console.log(d)}))}else if(n=="性取向"){const{value:c}=await v.fire({title:"編輯會員性取向",input:"select",inputOptions:{異性戀:"異性戀",同性戀:"同性戀",雙性戀:"雙性戀",泛性戀:"泛性戀",無性戀:"無性戀",不公開:"不公開"},inputPlaceholder:"請選擇",showCancelButton:!0});c&&(s.value.userInfo.sexualOrientation=c,h.patch(`${_}/users/${u.value}`,s.value).then(()=>{p.pushMessage("success","修改成功")}).catch(d=>{console.log(d)}))}else if(n=="寵物名稱"){const{value:c}=await v.fire({title:"編輯寵物名稱",input:"text",inputLabel:"",inputValue:s.value.petInfo.name,showCancelButton:!0,inputValidator:d=>{if(!d)return"不得為空白"}});c&&(s.value.petInfo.name=c,h.patch(`${_}/users/${u.value}`,s.value).then(()=>{p.pushMessage("success","修改成功")}).catch(d=>{console.log(d)}))}else if(n=="寵物品種"){const{value:c}=await v.fire({title:"編輯寵物品種",input:"text",inputLabel:"",inputValue:s.value.petInfo.breed,showCancelButton:!0,inputValidator:d=>{if(!d)return"不得為空白"}});c&&(s.value.petInfo.breed=c,h.patch(`${_}/users/${u.value}`,s.value).then(()=>{p.pushMessage("success","修改成功")}).catch(d=>{console.log(d)}))}else if(n=="寵物性別"){const{value:c}=await v.fire({title:"編輯寵物性別",input:"select",inputOptions:{男生:"男生",女生:"女生",雌雄同體:"雌雄同體"},inputPlaceholder:"請選擇",showCancelButton:!0});c&&(s.value.petInfo.gender=c,h.patch(`${_}/users/${u.value}`,s.value).then(()=>{p.pushMessage("success","修改成功")}).catch(d=>{console.log(d)}))}else if(n=="關於我"){const{value:c}=await v.fire({input:"textarea",inputLabel:"關於我",inputPlaceholder:"關於你和寵物的故事...",inputAttributes:{"aria-label":"關於你和寵物的故事..."},showCancelButton:!0});c&&(s.value.userInfo.intro=c,h.patch(`${_}/users/${u.value}`,s.value).then(()=>{p.pushMessage("success","修改成功")}).catch(d=>{console.log(d)}))}else if(n=="我的頭像"){const{value:c}=await v.fire({input:"url",inputLabel:"編輯我的頭像",inputPlaceholder:"置入有效圖片網址"});c&&(s.value.userInfo.pic=c,h.patch(`${_}/users/${u.value}`,s.value).then(()=>{p.pushMessage("success","修改成功")}).catch(d=>{console.log(d)}))}else if(n=="寵物頭像"){const{value:c}=await v.fire({input:"url",inputLabel:"編輯寵物頭像",inputPlaceholder:"置入有效圖片網址"});c&&(s.value.petInfo.pic=c,h.patch(`${_}/users/${u.value}`,s.value).then(()=>{p.pushMessage("success","修改成功")}).catch(d=>{console.log(d)}))}},g=I({postId:"",postImg:"",postText:"",createDate:"",whoLikes:[]}),t=()=>{let n=crypto.randomUUID();g.value.postId=n,g.value.createDate=S.getCurrentTime(),s.value.lifePic.push(g.value),h.patch(`${_}/users/${u.value}`,s.value).then(()=>{p.pushMessage("success","新增成功")}).catch(c=>{console.log(c)})},L=()=>{g.value.postImg="",g.value.postText=""},f=I({postId:"",postImg:"",postText:"",createDate:"",whoLikes:[]}),k=n=>{f.value.postId=n.postId,f.value.postImg=n.postImg,f.value.postText=n.postText,f.value.whoLikes=n.whoLikes},P=()=>{f.value.createDate=S.getCurrentTime();for(let n=0;n<s.value.lifePic.length;n++)s.value.lifePic[n].postId==f.value.postId&&(s.value.lifePic[n]=JSON.parse(JSON.stringify(f.value)));h.patch(`${_}/users/${u.value}`,s.value).then(()=>{p.pushMessage("success","編輯成功")}).catch(n=>{console.log(n)})},x=I([]),i=I([]),m=n=>{i.value=[],n.forEach(c=>{let d=x.value.filter(B=>B.id==c);i.value.push(d[0])})},u=I("");return W(()=>{F.navState="aboutme",u.value=localStorage.getItem("userId"),u.value&&(h.get(`${_}/users/${u.value}`).then(n=>{s.value.email=n.data.email,s.value.userInfo=n.data.userInfo,s.value.petInfo=n.data.petInfo,s.value.lifePic=n.data.lifePic}).catch(n=>{console.log(n)}),h.get(`${_}/users`).then(n=>{x.value=n.data}).catch(n=>{console.log(n)}))}),{memberInfo:s,newPost:g,userId:u,editPostTemp:f,likersInfo:i,editInfo:o,createPost:t,clearPost:L,seeWhoLikes:m,editPost:k,sendEditPost:P}}},r=s=>(z("data-v-f27cac2b"),s=s(),A(),s),J={key:0,class:"bg-hangout-bg pt-4 pb-7"},q={class:"container"},K={class:"row justify-content-center"},Q={class:"col-10 col-lg-8"},X={class:"row"},Y={class:"col-sm-6"},Z={class:"mb-5"},$=r(()=>e("div",{class:"d-flex align-items-center mb-2"},[e("span",null,"我的頭像")],-1)),ee=["src"],te={key:1,src:"https://github.com/patrickpie83/HangOut/blob/master/public/images/img_memberPic.png?raw=true",alt:"defaulfUserPic"},se={class:"mb-5"},oe=r(()=>e("div",{class:"d-flex align-items-center mb-2"},[e("span",null,"會員名稱")],-1)),ne={key:0,class:"text-center"},ae={key:1,class:"text-center text-hangout-second fw-bold"},le={class:"mb-5"},ie=r(()=>e("div",{class:"d-flex align-items-center mb-2"},[e("span",null,"性別")],-1)),ce={key:0,class:"text-center"},de={key:1,class:"text-center text-hangout-second fw-bold"},re={class:"mb-5"},ue=r(()=>e("div",{class:"d-flex align-items-center mb-2"},[e("span",null,"性取向")],-1)),me={key:0,class:"text-center"},he={key:1,class:"text-center text-hangout-second fw-bold"},_e={class:"col-sm-6"},pe={class:"mb-5"},be=r(()=>e("div",{class:"d-flex align-items-center mb-2"},[e("span",null,"寵物頭像")],-1)),fe=["src"],ve={key:1,src:"https://github.com/patrickpie83/HangOut/blob/master/public/images/img_petPic.png?raw=true",alt:"defaultPetPic"},ge={class:"mb-5"},Ie=r(()=>e("div",{class:"d-flex align-items-center mb-2"},[e("span",null,"寵物名稱")],-1)),xe={key:0,class:"text-center"},we={key:1,class:"text-center text-hangout-second fw-bold"},ye={class:"mb-5"},ke=r(()=>e("div",{class:"d-flex align-items-center mb-2"},[e("span",null,"寵物品種")],-1)),Pe={key:0,class:"text-center"},Ce={key:1,class:"text-center text-hangout-second fw-bold"},Te={class:"mb-5"},Le=r(()=>e("div",{class:"d-flex align-items-center mb-2"},[e("span",null,"寵物性別")],-1)),Me={key:0,class:"text-center"},Ee={key:1,class:"text-center text-hangout-second fw-bold"},Se={class:"row pb-6 border-bottom"},Be={class:"col"},Ne=r(()=>e("div",{class:"d-flex align-items-center mb-2"},[e("span",null,"關於我")],-1)),Ve={key:0},Oe={key:1,class:"text-hangout-second fw-bold"},De={class:"row mt-6 mb-4"},Ue=r(()=>e("div",{class:"col-6 col-lg-9 d-flex align-items-center"},[e("span",null,"生活照")],-1)),He={class:"col-6 col-lg-3"},je={class:"modal fade",id:"newPost",tabindex:"-1","aria-labelledby":"newPostModalLabel","aria-hidden":"true"},We={class:"modal-dialog modal-dialog-centered modal-xl"},Re={class:"modal-content"},ze=r(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title"},"新增貼文")],-1)),Ae={class:"modal-body"},Fe={class:"container"},Ge={class:"row"},Je={class:"col-12 mb-4"},qe={class:"bg-white shadow-sm border border-hangout-second border-2",style:{"border-radius":"30px"}},Ke={class:"bg-hangout-block p-5",style:{"border-radius":"30px"}},Qe={class:"row"},Xe={class:"col-lg-12 mb-3"},Ye={class:"form-floating"},Ze=r(()=>e("label",{for:"postImg"},"置入圖片網址",-1)),$e={class:"col-lg-4"},et={class:"border border-hangout-second w-100"},tt={class:"ratio ratio-1x1"},st=["src"],ot={key:1,class:"text-center"},nt={class:"col-lg-8"},at={class:"form-floating"},lt=r(()=>e("label",{for:"postText"},"貼文內容",-1)),it={class:"modal-footer"},ct={key:0,class:"row"},dt={class:"bg-white shadow-sm border border-hangout-second border-2",style:{"border-radius":"30px"}},rt={class:"bg-hangout-block p-5",style:{"border-radius":"28px"}},ut={class:"d-sm-flex justify-content-sm-between"},mt={class:"ratio ratio-1x1 postPic"},ht=["src"],_t={class:"postText mt-4 mt-sm-0"},pt={class:"py-3 px-5 d-flex justify-content-between"},bt={class:"d-flex align-items-center"},ft=r(()=>e("span",{class:"material-icons me-2"}," favorite_border ",-1)),vt=["onClick"],gt={key:1},It={class:"modal fade",id:"seeWhoLikes",tabindex:"-1","aria-labelledby":"seeWhoLikesModalLabel","aria-hidden":"true"},xt={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable"},wt={class:"modal-content"},yt=r(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title"},"這些人按了喜歡")],-1)),kt={class:"modal-body"},Pt={class:"container"},Ct={class:"col-6 d-flex justify-content-center"},Tt=["src"],Lt={class:"col-6 d-flex align-items-center"},Mt=r(()=>e("div",{class:"modal-footer"},[e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉")],-1)),Et=["onClick"],St={class:"modal fade",id:"editPost",tabindex:"-1","aria-labelledby":"editPostModalLabel","aria-hidden":"true"},Bt={class:"modal-dialog modal-dialog-centered modal-xl"},Nt={class:"modal-content"},Vt=r(()=>e("div",{class:"modal-header"},[e("h5",{class:"modal-title"},"編輯貼文")],-1)),Ot={class:"modal-body"},Dt={class:"container"},Ut={class:"row"},Ht={class:"col-12 mb-4"},jt={class:"bg-white shadow-sm border border-hangout-second border-2",style:{"border-radius":"30px"}},Wt={class:"bg-hangout-block p-5",style:{"border-radius":"30px"}},Rt={class:"row"},zt={class:"col-lg-12 mb-3"},At={class:"form-floating"},Ft=r(()=>e("label",{for:"postImg"},"置入圖片網址",-1)),Gt={class:"col-lg-4"},Jt={class:"border border-hangout-second w-100"},qt={class:"ratio ratio-1x1"},Kt=["src"],Qt={key:1,class:"text-center"},Xt={class:"col-lg-8"},Yt={class:"form-floating"},Zt=r(()=>e("label",{for:"postText"},"貼文內容",-1)),$t={class:"modal-footer"},es=r(()=>e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1)),ts={key:1,class:"row"},ss=r(()=>e("div",{class:"col-12 mb-7"},[e("div",{class:"bg-white shadow-sm border border-hangout-second border-2",style:{"border-radius":"30px"}},[e("div",{class:"bg-hangout-block p-7",style:{"border-radius":"28px"}},[e("p",{class:"text-center text-hangout-second fw-bold"},"目前還沒有貼文")])])],-1)),os=[ss];function ns(s,o,g,t,L,f){const k=T("HeaderComponent"),P=T("NotLogin"),x=T("ChatRoomNav");return a(),l(C,null,[M(k),t.userId?(a(),l("div",J,[e("div",q,[e("div",K,[e("div",Q,[e("div",X,[e("div",Y,[e("div",Z,[$,e("div",{onClick:o[0]||(o[0]=i=>t.editInfo("我的頭像")),class:"headPicEffect ratio ratio-1x1"},[t.memberInfo.userInfo.pic?(a(),l("img",{key:0,src:t.memberInfo.userInfo.pic,alt:"userPic"},null,8,ee)):(a(),l("img",te))])]),e("div",se,[oe,e("div",{onClick:o[1]||(o[1]=i=>t.editInfo("會員名稱")),class:"memberEffect border border-hangout-second border-2 py-3"},[t.memberInfo.userInfo.name?(a(),l("p",ne,b(t.memberInfo.userInfo.name),1)):(a(),l("p",ae,"請填寫"))])]),e("div",le,[ie,e("div",{onClick:o[2]||(o[2]=i=>t.editInfo("性別")),class:"memberEffect border border-hangout-second border-2 py-3"},[t.memberInfo.userInfo.gender?(a(),l("p",ce,b(t.memberInfo.userInfo.gender),1)):(a(),l("p",de,"請填寫"))])]),e("div",re,[ue,e("div",{onClick:o[3]||(o[3]=i=>t.editInfo("性取向")),class:"memberEffect border border-hangout-second border-2 py-3"},[t.memberInfo.userInfo.sexualOrientation?(a(),l("p",me,b(t.memberInfo.userInfo.sexualOrientation),1)):(a(),l("p",he,"請填寫"))])])]),e("div",_e,[e("div",pe,[be,e("div",{onClick:o[4]||(o[4]=i=>t.editInfo("寵物頭像")),class:"headPicEffect ratio ratio-1x1"},[t.memberInfo.petInfo.pic?(a(),l("img",{key:0,src:t.memberInfo.petInfo.pic,alt:"petPic"},null,8,fe)):(a(),l("img",ve))])]),e("div",ge,[Ie,e("div",{onClick:o[5]||(o[5]=i=>t.editInfo("寵物名稱")),class:"memberEffect border border-hangout-second border-2 py-3"},[t.memberInfo.petInfo.name?(a(),l("p",xe,b(t.memberInfo.petInfo.name),1)):(a(),l("p",we,"請填寫"))])]),e("div",ye,[ke,e("div",{onClick:o[6]||(o[6]=i=>t.editInfo("寵物品種")),class:"memberEffect border border-hangout-second border-2 py-3"},[t.memberInfo.petInfo.breed?(a(),l("p",Pe,b(t.memberInfo.petInfo.breed),1)):(a(),l("p",Ce,"請填寫"))])]),e("div",Te,[Le,e("div",{onClick:o[7]||(o[7]=i=>t.editInfo("寵物性別")),class:"memberEffect border border-hangout-second border-2 py-3"},[t.memberInfo.petInfo.gender?(a(),l("p",Me,b(t.memberInfo.petInfo.gender),1)):(a(),l("p",Ee,"請填寫"))])])])]),e("div",Se,[e("div",Be,[Ne,e("div",{onClick:o[8]||(o[8]=i=>t.editInfo("關於我")),class:"memberEffect border border-hangout-second border-2 p-4"},[t.memberInfo.userInfo.intro?(a(),l("p",Ve,b(t.memberInfo.userInfo.intro),1)):(a(),l("p",Oe,"在這邊留下一些關於你和寵物的故事吧"))])])]),e("div",De,[Ue,e("div",He,[e("button",{onClick:o[9]||(o[9]=(...i)=>t.clearPost&&t.clearPost(...i)),type:"button",class:"newPostBtn w-100 btn bg-hangout-decorate border-hangout-decorate","data-bs-toggle":"modal","data-bs-target":"#newPost"},"新增貼文")])]),e("div",je,[e("div",We,[e("div",Re,[ze,e("div",Ae,[e("div",Fe,[e("div",Ge,[e("div",Je,[e("div",qe,[e("div",Ke,[e("div",Qe,[e("div",Xe,[e("div",Ye,[w(e("input",{"onUpdate:modelValue":o[10]||(o[10]=i=>t.newPost.postImg=i),type:"text",class:"form-control w-100",id:"postImg",placeholder:""},null,512),[[y,t.newPost.postImg,void 0,{lazy:!0}]]),Ze])]),e("div",$e,[e("div",et,[e("div",tt,[t.newPost.postImg?(a(),l("img",{key:0,src:t.newPost.postImg,alt:""},null,8,st)):(a(),l("p",ot,"尚未置入圖片"))])])]),e("div",nt,[e("div",at,[w(e("textarea",{"onUpdate:modelValue":o[11]||(o[11]=i=>t.newPost.postText=i),class:"form-control w-100",id:"postText",placeholder:"",style:{height:"317px"}},null,512),[[y,t.newPost.postText]]),lt])])])])])])])])]),e("div",it,[e("button",{onClick:o[12]||(o[12]=(...i)=>t.createPost&&t.createPost(...i)),type:"button",class:"btn btn-hangout-primary text-white","data-bs-dismiss":"modal"},"上傳"),e("button",{onClick:o[13]||(o[13]=(...i)=>t.clearPost&&t.clearPost(...i)),type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"放棄")])])])]),t.memberInfo.lifePic.length>0?(a(),l("div",ct,[(a(!0),l(C,null,E(t.memberInfo.lifePic,i=>(a(),l("div",{key:i.createDate,class:"col-12 mb-4"},[e("div",dt,[e("div",rt,[e("div",ut,[e("div",mt,[e("img",{class:"w-100",src:i.postImg,alt:""},null,8,ht)]),e("p",_t,b(i.postText),1)])]),e("div",pt,[e("div",bt,[ft,i.whoLikes.length>0?(a(),l("a",{key:0,onClick:m=>t.seeWhoLikes(i.whoLikes),type:"button",class:"text-hangout-text","data-bs-toggle":"modal","data-bs-target":"#seeWhoLikes"},b(i.whoLikes.length)+"人",9,vt)):(a(),l("span",gt,"0人"))]),e("div",It,[e("div",xt,[e("div",wt,[yt,e("div",kt,[e("div",Pt,[(a(!0),l(C,null,E(t.likersInfo,m=>(a(),l("div",{key:m.id,class:"row border-bottom pb-3 mb-3"},[e("div",Ct,[e("img",{src:m.userInfo.pic,alt:"",style:{width:"80px",height:"80px"}},null,8,Tt)]),e("div",Lt,[e("p",null,b(m.userInfo.name),1)])]))),128))])]),Mt])])]),e("a",{onClick:m=>t.editPost(i),type:"button",class:"text-hangout-text text-decoration-none","data-bs-toggle":"modal","data-bs-target":"#editPost"},"編輯",8,Et),e("div",St,[e("div",Bt,[e("div",Nt,[Vt,e("div",Ot,[e("div",Dt,[e("div",Ut,[e("div",Ht,[e("div",jt,[e("div",Wt,[e("div",Rt,[e("div",zt,[e("div",At,[w(e("input",{"onUpdate:modelValue":o[14]||(o[14]=m=>t.editPostTemp.postImg=m),type:"text",class:"form-control w-100",id:"postImg",placeholder:""},null,512),[[y,t.editPostTemp.postImg,void 0,{lazy:!0}]]),Ft])]),e("div",Gt,[e("div",Jt,[e("div",qt,[t.editPostTemp.postImg?(a(),l("img",{key:0,src:t.editPostTemp.postImg,alt:""},null,8,Kt)):(a(),l("p",Qt,"未置入圖片"))])])]),e("div",Xt,[e("div",Yt,[w(e("textarea",{"onUpdate:modelValue":o[15]||(o[15]=m=>t.editPostTemp.postText=m),class:"form-control w-100",id:"postText",placeholder:"",style:{height:"317px"}},null,512),[[y,t.editPostTemp.postText]]),Zt])])])])])])])])]),e("div",$t,[e("button",{onClick:o[16]||(o[16]=(...m)=>t.sendEditPost&&t.sendEditPost(...m)),type:"button",class:"btn btn-hangout-primary text-white","data-bs-dismiss":"modal"},"完成"),es])])])])])])]))),128))])):(a(),l("div",ts,os))])])])])):(a(),R(P,{key:1})),M(x)],64)}const rs=j(G,[["render",ns],["__scopeId","data-v-f27cac2b"]]);export{rs as default};
